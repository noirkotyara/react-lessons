(this["webpackJsonpmy-app-1"]=this["webpackJsonpmy-app-1"]||[]).push([[6],{496:function(e,t,n){"use strict";n.r(t);var a=n(69),r=n(0),s=n.n(r),c=n(410),l=n.n(c),u=n(60),o=function(e){var t=e.user;return s.a.createElement("div",null,s.a.createElement("img",{src:t.photo,alt:"avatar",style:{height:"5vh",width:"5vh"}}),s.a.createElement("span",null,t.userName),s.a.createElement("div",{style:{float:"right"}},t.message))},i=function(e){var t=e.ws,n=Object(r.useState)([]),c=Object(a.a)(n,2),i=c[0],m=c[1],v=function(e){var t=JSON.parse(e.data);m((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t))}))};Object(r.useEffect)((function(){return null!==t&&t.addEventListener("message",v),function(){null!==t&&(t.removeEventListener("message",v),t.close())}}),[t]);var f=i;return s.a.createElement(l.a,{style:{overflow:"auto",height:"50vh"}},f.map((function(e,t){return s.a.createElement(o,{key:t,user:e})})))},m=n(111),v=function(e){var t=e.ws,n=Object(r.useState)("pending"),c=Object(a.a)(n,2),l=c[0],u=c[1],o=function(){u("ready")};return Object(r.useEffect)((function(){return null!==t&&t.addEventListener("open",o),function(){null!==t&&t.removeEventListener("open",o)}}),[t]),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(m.c,{initialValues:{message:""},onSubmit:function(e,n){var a=n.setSubmitting,r=n.resetForm;console.log(e),e.message&&(null!==t&&t.send(e.message),r(),a(!1))}},(function(e){var t=e.isSubmitting;return s.a.createElement(m.b,null,s.a.createElement(m.a,{type:"text",name:"message"}),s.a.createElement("button",{type:"submit",disabled:t||"ready"!==l},"Send"))}))))};t.default=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e,t=function(){console.log("CLOSE WS"),setTimeout(a,3e3)},a=function(){null!==n&&(n.removeEventListener("close",t),n.close()),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),c(e)};return a(),function(){e.removeEventListener("close",t),e.close()}}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,null,s.a.createElement(i,{ws:n}),s.a.createElement(v,{ws:n})))}}}]);
//# sourceMappingURL=6.475e5518.chunk.js.map