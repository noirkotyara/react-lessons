{"version":3,"sources":["components/CommonPages/Message.tsx","components/CommonPages/ChatWindow.tsx","components/CommonPages/ChatForm.tsx","components/CommonPages/ChatPage.tsx"],"names":["Message","user","src","photo","alt","style","height","width","userName","float","message","ChatWindow","props","useState","messagesData","setMessagesData","ws","WebSocket","useEffect","addEventListener","event","newMessagesData","JSON","parse","data","messages","overflow","map","index","key","ChatForm","initialValues","onSubmit","values","setSubmitting","resetForm","console","log","send","isSubmitting","type","name","disabled","ChatPage"],"mappings":"yKAIaA,EAA2C,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACvD,OAAQ,6BACJ,yBAAKC,IAAKD,EAAKE,MAAOC,IAAI,SAASC,MAAO,CAAEC,OAAQ,MAAOC,MAAO,SAClE,8BAAON,EAAKO,UACZ,yBAAKH,MAAO,CAAEI,MAAO,UAAYR,EAAKS,WCHjCC,EAA2B,SAACC,GAAW,IAAD,EAETC,mBAA6B,IAFpB,mBAE1CC,EAF0C,KAE5BC,EAF4B,KAGzCC,EAAK,IAAIC,UAAU,gEAEzBC,qBAAU,WAENF,EAAGG,iBAAiB,WAAW,SAACC,GAC5B,IAAIC,EAAkBC,KAAKC,MAAMH,EAAMI,MACvCT,GAAgB,SAACD,GAAD,4BAAsBA,GAAtB,YAAuCO,YAE5D,IAEH,IAAMI,EAA+BX,EACrC,OACI,kBAAC,IAAD,CAAQT,MAAO,CACXqB,SAAU,OAAQpB,OAAQ,SAEzBmB,EAASE,KAAI,SAACjB,EAASkB,GAAV,OAAoB,kBAAC,EAAD,CAASC,IAAKD,EAAO3B,KAAMS,S,SChB5DoB,EAAyB,SAAClB,GAEnC,IAAMI,EAAK,IAAIC,UAAU,gEAWzB,OAAQ,6BACJ,6BACI,kBAAC,IAAD,CAAQc,cAAe,CAAErB,QAAS,IAAOsB,SAXhC,SAACC,EAAD,GAA+E,IAAzDC,EAAwD,EAAxDA,cAAeC,EAAyC,EAAzCA,UAElDC,QAAQC,IAAIJ,GACRA,EAAOvB,UACXM,EAAGsB,KAAKL,EAAOvB,SACfyB,IACAD,GAAc,OAML,gBAAGK,EAAH,EAAGA,aAAH,OACG,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOC,KAAK,OAAOC,KAAK,YACxB,4BAAQD,KAAK,SAASE,SAAUH,GAAhC,eCXTI,UAVE,WACb,OAAQ,oCACJ,kBAAC,IAAD,KACI,kBAAC,EAAD,MACA,kBAAC,EAAD","file":"static/js/5.c19aac58.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\n\r\n\r\nexport const Message: React.FC<{ user: MessageType }> = ({ user }) => {\r\n    return (<div>\r\n        <img src={user.photo} alt=\"avatar\" style={{ height: '5vh', width: '5vh' }} />\r\n        <span>{user.userName}</span>\r\n        <div style={{ float: 'right' }}>{user.message}</div>\r\n    </div>);\r\n};\r\n\r\n//types\r\nexport type MessageType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n  }\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Layout from \"antd/lib/layout/layout\";\r\nimport { MessageType } from \"./Message\";\r\nimport { Message } from \"./Message\";\r\n\r\nexport const ChatWindow: React.FC<{}> = (props) => {\r\n\r\n    let [messagesData, setMessagesData] = useState<Array<MessageType>>([])\r\n    const ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    \r\n    useEffect(() => {\r\n        \r\n        ws.addEventListener('message', (event) => {\r\n            let newMessagesData = JSON.parse(event.data)\r\n            setMessagesData((messagesData) => [...messagesData, ...newMessagesData] )\r\n          } ) \r\n    }, [])\r\n\r\n    const messages: Array<MessageType> = messagesData\r\n    return (\r\n        <Layout style={{\r\n            overflow: 'auto', height: '50vh',\r\n        }}>\r\n            {messages.map((message, index) => <Message key={index} user={message} />)}\r\n        </Layout>\r\n    );\r\n};\r\n","import { Field, Form, Formik, FormikHelpers } from 'formik';\r\nimport React from 'react';\r\n\r\ntype FormType = {\r\n    message: string\r\n}\r\n\r\nexport const ChatForm: React.FC<{}> = (props) => {\r\n\r\n    const ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n   \r\n    const onSubmit = (values: FormType , { setSubmitting, resetForm }: FormikHelpers<FormType>) => {\r\n        // todo: async setSubmitting\r\n        console.log(values)\r\n        if(!values.message) return;\r\n        ws.send(values.message)\r\n        resetForm()\r\n        setSubmitting(false);\r\n    }\r\n\r\n    return (<div> \r\n        <div>\r\n            <Formik initialValues={{ message: '' }}  onSubmit={onSubmit}>\r\n                {({ isSubmitting }) => (\r\n                    <Form>\r\n                        <Field type=\"text\" name=\"message\" />\r\n                        <button type=\"submit\" disabled={isSubmitting}>Send</button>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </div>\r\n    </div>);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n//types\r\n","import React from \"react\"\r\nimport Layout from \"antd/lib/layout/layout\";\r\nimport { ChatWindow } from \"./ChatWindow\";\r\nimport { ChatForm } from \"./ChatForm\";\r\n\r\nconst ChatPage = () => {\r\n    return (<>\r\n        <Layout>\r\n            <ChatWindow  />\r\n            <ChatForm />\r\n        </Layout>\r\n    </>)\r\n}\r\n\r\n\r\nexport default ChatPage"],"sourceRoot":""}